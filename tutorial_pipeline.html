

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Tutorial: pipeline &mdash; BioImageIT GUI 0.0.1 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="bioimageit_gui" href="modules.html" />
    <link rel="prev" title="Tutorial: runner" href="tutorial_runner.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> BioImageIT GUI
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_experiment.html">Tutorial: experiment</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_finder.html">Tutorial: finder</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorial_runner.html">Tutorial: runner</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorial: pipeline</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-tutorial-project">The tutorial project</a></li>
<li class="toctree-l2"><a class="reference internal" href="#image-deconvolution">Image deconvolution</a></li>
<li class="toctree-l2"><a class="reference internal" href="#spot-detection">Spot detection</a></li>
<li class="toctree-l2"><a class="reference internal" href="#statistical-testing">Statistical testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#conclusion">Conclusion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">bioimageit_gui</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">BioImageIT GUI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Tutorial: pipeline</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/tutorial_pipeline.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tutorial-pipeline">
<h1>Tutorial: pipeline<a class="headerlink" href="#tutorial-pipeline" title="Permalink to this headline">¶</a></h1>
<p>In this tutorial, we are going to write a pipeline for batch processing data stored in an <code class="docutils literal notranslate"><span class="pre">Experiment</span></code>.
We will use the 3 application <em>Browser app</em>, <em>Finder app</em> and <em>Runner app</em> to manage and process data.</p>
<div class="section" id="the-tutorial-project">
<h2>The tutorial project<a class="headerlink" href="#the-tutorial-project" title="Permalink to this headline">¶</a></h2>
<p>In this tutorial we use the same dataset as in the first tutorial (see <a class="reference internal" href="tutorial_experiment.html#tutorial-experiment"><span class="std std-ref">Tutorial: experiment</span></a>). We then supposed that we
already have a created experiment with the imported and taged.</p>
<p>In the following of this tutorial, we are going to process the data in 3 steps.</p>
<ul class="simple">
<li><p>Image deconvolution on each image to ease the spot segmentation</p></li>
<li><p>Auto thresholding and particle analysis on the deconvolutes images</p></li>
<li><p>Statistical testing with the wilcoxon test to conclude if the two populations have significantly different number of spots</p></li>
</ul>
<p>The 3 proposed steps are just one possible way to analyse the data, to illustrate the use of BioImageApp. Many other processing
pipeline are possible to analyse this dataset, but it is not the purpose of this tutorial.</p>
<p>First, we open the <em>Browser</em> application in the experiment we created in the previous tutorial:</p>
<div class="figure align-center">
<img alt="_images/image15.png" src="_images/image15.png" />
</div>
</div>
<div class="section" id="image-deconvolution">
<h2>Image deconvolution<a class="headerlink" href="#image-deconvolution" title="Permalink to this headline">¶</a></h2>
<p>To make the spot segmentation easier to identify, we chose to preprocess the data with a deconvolution algorithm. The selected
algorithm is the SPARTION2D. It is a c++ implementation of the sparse variation deconvolution method.</p>
<p>Clic on the <em>Process</em> button in the experiement toolbar:</p>
<div class="figure align-center">
<img alt="_images/image2a1.png" src="_images/image2a1.png" />
</div>
<p>Then clic on the <em>Image restoration</em> toolbox:</p>
<div class="figure align-center">
<img alt="_images/image2b1.png" src="_images/image2b1.png" />
</div>
<p>And clic on the <em>Deconvolution</em> toolbox:</p>
<div class="figure align-center">
<img alt="_images/image2c1.png" src="_images/image2c1.png" />
</div>
<p>The <em>Finder app</em> shows the documentation of the SPARTION2D algorithm. It allows to know to which time of images it is adapted and how to
tune the parameters.</p>
<p>Clic on the open button of the SPARTION2D tool:</p>
<div class="figure align-center">
<img alt="_images/image2d.png" src="_images/image2d.png" />
</div>
<p>Go to the <em>experiment</em> tab and select the <em>Experiment dir</em>. Then the <em>Input Image</em> box is automatically filled with the list of
datasets in the Experiment (only the <em>data</em> dataset in our example). The <em>Input Image</em> field have a <em>Filter</em> button to select a subset
of data in the dataset. In our case, we want to process all the data, thus we do not use it. In the next processing steps we will see
how to use this <em>Filter</em> button:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/image3a.png"><img alt="_images/image3a.png" src="_images/image3a.png" style="width: 250px;" /></a>
</div>
<p>Now, we can tune the deconvolution parameters. In the example below, we set the parameters we found in the previous tutorial. Then press <em>Run</em>:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/image3b.png"><img alt="_images/image3b.png" src="_images/image3b.png" style="width: 250px;" /></a>
</div>
<p>When the processing is finished, the progress bar is at 100% and the log area print <em>done</em></p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/image3c.png"><img alt="_images/image3c.png" src="_images/image3c.png" style="width: 250px;" /></a>
</div>
<p>We can then close the <em>Runner app</em> and go back to the <em>Browser app</em>. Clic on the refresh toolbar button:</p>
<div class="figure align-center">
<img alt="_images/image4a.png" src="_images/image4a.png" />
</div>
<p>The new dataset sdeconv2d become accessible:</p>
<div class="figure align-center">
<img alt="_images/image4b.png" src="_images/image4b.png" />
</div>
<p>Double clic on one of the data allows to visualize the processed data and the corresponding automatically generated metadata:</p>
<div class="figure align-center">
<img alt="_images/image4c.png" src="_images/image4c.png" />
</div>
</div>
<div class="section" id="spot-detection">
<h2>Spot detection<a class="headerlink" href="#spot-detection" title="Permalink to this headline">¶</a></h2>
<p>In this step, we apply an automatique threshold and a particle analysis in each images in order to obtain the number of spots for
each images. To do that we will use a Fiji macro that runs an auto-threshold and the analyse particles tool.</p>
<p>Open the <em>Finder app</em> using the <em>Process</em> button of the experiement browser</p>
<div class="figure align-center">
<img alt="_images/image5a.png" src="_images/image5a.png" />
</div>
<p>Clic on the <em>Segmentation</em> toolbox.</p>
<div class="figure align-center">
<img alt="_images/image5b.png" src="_images/image5b.png" />
</div>
<p>Open the <em>Count particles</em> tool:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/image5c.png"><img alt="_images/image5c.png" src="_images/image5c.png" style="width: 250px;" /></a>
</div>
<p>Clic the <em>Experiment</em> tab, and select the <em>Experiment dir</em>. For the <em>Input image</em> field, select the <em>sdeconv2d</em>. This means that
we will run the spot detection on the images in the <em>sdeconv2d</em> dataset:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/image6a.png"><img alt="_images/image6a.png" src="_images/image6a.png" style="width: 250px;" /></a>
</div>
<p>For the spot detection parameters, we can select the automatic threshold method. We can recognize that we have all the methods
from the Fiji software:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/image6b.png"><img alt="_images/image6b.png" src="_images/image6b.png" style="width: 250px;" /></a>
</div>
<p>Select the “Default” method and press run:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="_images/image6c.png"><img alt="_images/image6c.png" src="_images/image6c.png" style="width: 250px;" /></a>
</div>
<p>When the processing is finished, close the <em>Runner app</em> and the <em>Finder app</em>. Clic on the <em>Refresh</em> button in the <em>Browser app</em>:</p>
<div class="figure align-center">
<img alt="_images/image7a.png" src="_images/image7a.png" />
</div>
<p>We can see that for each input image, we have 3 outputs:</p>
<ul class="simple">
<li><p>Particle drawing: an image with the drawing of the extracted spots</p></li>
<li><p>Number of particles: a csv file that contains the number of detected spots in the image</p></li>
<li><p>Particle measures: a csv file containg the measurement table of the spots desciptors (area and position)</p></li>
</ul>
<p>When we double clic on the data, it open a viewer:</p>
<div class="figure align-center">
<img alt="_images/image7b.png" src="_images/image7b.png" />
</div>
</div>
<div class="section" id="statistical-testing">
<h2>Statistical testing<a class="headerlink" href="#statistical-testing" title="Permalink to this headline">¶</a></h2>
<p>In the previous processing step, we extracted the number of spots for each images. This number is contained in the
<em>Number of particles</em> csv files. In this step we are going to run a statistical testing on these number in order to
measure is the <em>Population1</em> and <em>Population2</em> data have significant different number of spots.</p>
<p>To illustrate the use of statistical testing with BioImageIT, we chose in this tutorial to run a Wilcoxon rank test. This is not
the best test for such statistical analysis, but the purpose of the tutorial is to show how to run proceses, and Wilcoxon rank test
is a simple easy to use example.</p>
<p>Clic on the <em>Process</em> button of the Experiment browser:</p>
<div class="figure align-center">
<img alt="_images/image8a.png" src="_images/image8a.png" />
</div>
<p>Clic on the <em>Statistics</em> toolbox:</p>
<div class="figure align-center">
<img alt="_images/image8b.png" src="_images/image8b.png" />
</div>
<p>Open the <em>Wilcoxon</em> tool:</p>
<div class="figure align-center">
<img alt="_images/image8c.png" src="_images/image8c.png" />
</div>
<p>Select the Experiment in the <em>Experiment dir</em> field:</p>
<div class="figure align-center">
<img alt="_images/image9a.png" src="_images/image9a.png" />
</div>
<p>The <em>Wilcoxon</em> tool have too inputs: <em>Population1</em> and <em>population2</em>. These two inputs are in fact arrays of values corresponding
to the two population we want to process. In most of the existing application, to construct such arrays, we need to write a script that
read the values (number of spot) for each image, create the two arrays and run the statistical test.</p>
<p>Because in BioImageIT, we tag the data, we can simply use <em>Filter</em> to automatically generate the data arrays.</p>
<p>For the <em>Population1</em> and <em>Population2</em>, select the line <em>threshold_particles:Number Of Particles</em> (see figure above).</p>
<p>Now, we need to specify that for <em>Population1</em> we want to select the images with the corresponding tag. Clic on the <em>Filter</em> button
at the right of the <em>Population1</em> input:</p>
<div class="figure align-center">
<img alt="_images/image9b.png" src="_images/image9b.png" />
</div>
<p>It opens a popup window where you can tune a filter. Here we select the data where the tag <em>Population</em> equals “population1”.
Then, we do the same for the second population:</p>
<div class="figure align-center">
<img alt="_images/image9c.png" src="_images/image9c.png" />
</div>
<p>Press the <em>Run</em> button:</p>
<div class="figure align-center">
<img alt="_images/image9d.png" src="_images/image9d.png" />
</div>
<p>Close the <em>Runner app</em>, and press <em>Refresh</em> on the experiment browser:</p>
<div class="figure align-center">
<img alt="_images/image10a.png" src="_images/image10a.png" />
</div>
<p>We can now see the dataset that correspond to the <em>Wilcoxon</em> testing. It contains 2 data:</p>
<ul class="simple">
<li><p>t: the Wilcoxon statistic</p></li>
<li><p>p: the p-value</p></li>
</ul>
<p>Double clic on the <em>p</em> data to visualize the p-value:</p>
<div class="figure align-center">
<img alt="_images/image10b.png" src="_images/image10b.png" />
</div>
<p>We can see the the p-value=0.0021. This means that reject the null hypothesis saying that the 2 populations have the
same number of spots.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>During the step, we mention that BioImageIT created two arrays from the dataset <em>threshold_particles:Number Of Particles</em> using the <em>Filters</em> that we tuned with the experiment tags. In fact, these arrays are stored in the output dataset. Thus, if we open the directory <code class="docutils literal notranslate"><span class="pre">myexperiment/Wicoxon/</span></code> we can find the file <code class="docutils literal notranslate"><span class="pre">x.csv</span></code> and <code class="docutils literal notranslate"><span class="pre">y.csv</span></code> that actually contain these two arrays.</p>
</div>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>
<p>In this tutorial we saw how to use the <em>Browser app</em>, the <em>finder app</em> and the <em>Runner app</em> to build step by step a image analysis
pipeline without writing a single line of code.</p>
<p>All the data we generated are stored in an <code class="docutils literal notranslate"><span class="pre">Experiment</span></code> database with automatically generated metadata. This means that for
every data in the <code class="docutils literal notranslate"><span class="pre">Experiment</span></code> database, we can track it origin and the parameters of each processing tool used to genate it.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="modules.html" class="btn btn-neutral float-right" title="bioimageit_gui" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="tutorial_runner.html" class="btn btn-neutral float-left" title="Tutorial: runner" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020, Sylvain Prigent.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>